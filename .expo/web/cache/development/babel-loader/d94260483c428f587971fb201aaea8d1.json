{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport moment from \"moment\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport ButtonsRow from \"../utills/components/ButtonsRow\";\nimport ButtonClick from \"../utills/components/ButtonClick\";\nimport DisplayDateClock from \"./components/DisplayDateClock\";\nimport ModalInput from \"../utills/components/ModalInput\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar clockOffset;\nvar dateOffset;\n\nvar retrieveData = function retrieveData() {\n  var clock, date;\n  return _regeneratorRuntime.async(function retrieveData$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('clockOffset'));\n\n        case 3:\n          clock = _context.sent;\n\n          if (clock !== null) {\n            clockOffset = parseInt(clock);\n          }\n\n          _context.next = 7;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem('dateOffset'));\n\n        case 7:\n          date = _context.sent;\n\n          if (date !== null) {\n            dateOffset = parseInt(date);\n          }\n\n          console.log(\"galdebug\");\n          _context.next = 15;\n          break;\n\n        case 12:\n          _context.prev = 12;\n          _context.t0 = _context[\"catch\"](0);\n          console.log(_context.t0);\n\n        case 15:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[0, 12]], Promise);\n};\n\nvar storeData = function storeData() {\n  return _regeneratorRuntime.async(function storeData$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('clockOffset', clockOffset));\n\n        case 3:\n          _context2.next = 5;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem('dateOffset', dateOffset));\n\n        case 5:\n          _context2.next = 10;\n          break;\n\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n          console.log(_context2.t0);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n};\n\nretrieveData();\n\nvar AppWatch = function AppWatch() {\n  var clockNow = new Date();\n\n  var _useState = useState('24H'),\n      _useState2 = _slicedToArray(_useState, 2),\n      fotmetWatch = _useState2[0],\n      setfotmetWatch = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      clock = _useState4[0],\n      setclock = _useState4[1];\n\n  var _useState5 = useState('en-US'),\n      _useState6 = _slicedToArray(_useState5, 2),\n      clockFormat = _useState6[0],\n      setclockFormat = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      modalOpen = _useState8[0],\n      setmodalOpen = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      modalFormat = _useState10[0],\n      setmodalFormat = _useState10[1];\n\n  useEffect(function () {\n    var interval = setInterval(function () {\n      setclock(clockNow.toLocaleTimeString());\n    }, 1000);\n    return function () {\n      clearInterval(interval);\n    };\n  });\n\n  var set = function set() {\n    if (modalOpen == false) {\n      setmodalOpen(true);\n    } else {\n      setmodalOpen(false);\n    }\n  };\n\n  var save = function save(values) {\n    var userTimeInSeconds = parseInt(values.hours) * 60 * 60 + parseInt(values.minute) * 60 + parseInt(values.second);\n    var currTimeInSeconds = clockNow.getHours() * 60 * 60 + clockNow.getMinutes() * 60 + clockNow.getSeconds();\n    console.log(values.date);\n    clockOffset = (userTimeInSeconds - currTimeInSeconds) * 1000;\n    dateOffset = new Date(values.date).getTime() + userTimeInSeconds * 1000 - clockNow.getTime();\n    storeData();\n  };\n\n  var pormatWatch = function pormatWatch() {\n    if (clockFormat == 'fr-FR') {\n      setclockFormat('en-US');\n    } else {\n      setclockFormat('fr-FR');\n    }\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(DisplayDateClock, {\n      clock: new Date(clockNow.getTime() + clockOffset).toLocaleTimeString(clockFormat),\n      date: moment(new Date(new Date().getTime() + dateOffset)).format('DD/MM/YYYY'),\n      fontSize: 45\n    }), fotmetWatch == 'AM/PM' && _jsxs(ButtonsRow, {\n      children: [_jsx(ButtonClick, {\n        title: \"Set\",\n        background: \"#5F9EA0\",\n        onPress: set,\n        fontSize: 22\n      }), _jsx(ButtonClick, {\n        title: \"AM/PM\",\n        background: \"#5F9EA0\",\n        onPress: pormatWatch,\n        fontSize: 15\n      })]\n    }), fotmetWatch == '24H' && _jsxs(ButtonsRow, {\n      children: [_jsx(ButtonClick, {\n        title: \"Set\",\n        background: \"#5F9EA0\",\n        onPress: set,\n        fontSize: 22\n      }), _jsx(ButtonClick, {\n        title: \"24H\",\n        background: \"#B0E0E6\",\n        onPress: pormatWatch,\n        fontSize: 25\n      })]\n    }), _jsx(ModalInput, {\n      modalOpen: modalOpen,\n      set: set,\n      save: save,\n      modalFormat: modalFormat\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'black',\n    alignItems: 'center',\n    paddingTop: 100,\n    paddingHorizontal: 20\n  }\n});\nexport default AppWatch;","map":{"version":3,"sources":["C:/Users/micha/Desktop/react netive/project/watch/AppWatch.jsx"],"names":["React","useState","useEffect","moment","AsyncStorage","ButtonsRow","ButtonClick","DisplayDateClock","ModalInput","clockOffset","dateOffset","retrieveData","getItem","clock","parseInt","date","console","log","storeData","setItem","AppWatch","clockNow","Date","fotmetWatch","setfotmetWatch","setclock","clockFormat","setclockFormat","modalOpen","setmodalOpen","modalFormat","setmodalFormat","interval","setInterval","toLocaleTimeString","clearInterval","set","save","values","userTimeInSeconds","hours","minute","second","currTimeInSeconds","getHours","getMinutes","getSeconds","getTime","pormatWatch","styles","container","format","StyleSheet","create","flex","backgroundColor","alignItems","paddingTop","paddingHorizontal"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, View} from 'react-native';\r\nimport moment from \"moment\";\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\n\r\n// Import components from the project\r\nimport ButtonsRow from '../utills/components/ButtonsRow';\r\nimport ButtonClick from '../utills/components/ButtonClick';\r\nimport DisplayDateClock from './components/DisplayDateClock';\r\nimport ModalInput from '../utills/components/ModalInput';\r\n\r\nlet clockOffset;\r\nlet dateOffset;\r\n\r\n//async-storage,Retrieving data when closing the app\r\nconst retrieveData = async () => {\r\n  try {\r\n    const clock = await AsyncStorage.getItem('clockOffset');\r\n    if (clock !== null) {\r\n      clockOffset = parseInt(clock)\r\n    }\r\n    const date = await AsyncStorage.getItem('dateOffset');\r\n    if (date !== null) {\r\n      dateOffset = parseInt(date)\r\n    }\r\n    console.log(\"galdebug\")\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n};\r\n\r\n// async-storage,Saving data when closing the app\r\nconst storeData = async () => {\r\n  try {\r\n    await AsyncStorage.setItem(\r\n      'clockOffset',\r\n      clockOffset\r\n    );\r\n    await AsyncStorage.setItem(\r\n      'dateOffset',\r\n      dateOffset\r\n    );\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n};\r\n\r\nretrieveData()\r\n\r\n const AppWatch = ()=> {\r\n   const clockNow=new Date() //real time\r\n   \r\n    const [fotmetWatch,setfotmetWatch]= useState('24H') //format-button\r\n\r\n    const [clock,setclock]=useState()\r\n    const [clockFormat,setclockFormat]=useState('en-US')//format-watch\r\n\r\n\r\n    // Modal-pop-up\r\n    const [modalOpen,setmodalOpen]=useState(false)\r\n    const [modalFormat, setmodalFormat] = useState(false)\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n        const interval =setInterval(()=>{\r\n          setclock(clockNow.toLocaleTimeString())\r\n        },1000)\r\n\r\n        return ()=>{\r\n          clearInterval(interval)\r\n        }\r\n    })\r\n\r\n  // Functions for the buttons\r\n  // Settings button\r\n    const set = ()=>{\r\n      if(modalOpen == false){\r\n        setmodalOpen(true)\r\n      }else{\r\n        setmodalOpen(false)\r\n      }\r\n    }\r\n\r\n  //save button\r\n    const save=(values)=>{\r\n      let userTimeInSeconds = parseInt(values.hours) * 60 * 60 +\r\n         parseInt(values.minute) * 60 +\r\n         parseInt(values.second)\r\n      \r\n      let currTimeInSeconds = \r\n        clockNow.getHours() * 60 * 60 +\r\n        clockNow.getMinutes() * 60 +\r\n        clockNow.getSeconds()\r\n      console.log(values.date)\r\n      clockOffset =(userTimeInSeconds - currTimeInSeconds) * 1000\r\n      dateOffset = new Date(values.date).getTime() + userTimeInSeconds * 1000 - clockNow.getTime()\r\n      storeData()\r\n    }\r\n\r\n    //Change button format\r\n    const pormatWatch = ()=>{\r\n      if (clockFormat == 'fr-FR') {\r\n        setclockFormat('en-US')\r\n      } else {\r\n        setclockFormat('fr-FR')\r\n      }  \r\n    }\r\n\r\n    return (\r\n      <View style={styles.container} >\r\n\r\n        <DisplayDateClock \r\n          clock={new Date(clockNow.getTime() + clockOffset).toLocaleTimeString(clockFormat)}\r\n          date={moment(new Date(new Date().getTime() + dateOffset)).format('DD/MM/YYYY')}\r\n          fontSize={45}>\r\n        </DisplayDateClock>\r\n      \r\n        {fotmetWatch == 'AM/PM' && (<ButtonsRow>\r\n            <ButtonClick \r\n                title=\"Set\"  \r\n                background=\"#5F9EA0\"  \r\n                onPress={set} \r\n                fontSize={22}>\r\n            </ButtonClick>\r\n\r\n            <ButtonClick \r\n                title=\"AM/PM\"  \r\n                background=\"#5F9EA0\" \r\n                onPress={pormatWatch} \r\n                fontSize={15}>\r\n            </ButtonClick>\r\n        </ButtonsRow>\r\n        )}\r\n\r\n        {fotmetWatch == '24H' && (<ButtonsRow>\r\n            <ButtonClick \r\n            title=\"Set\"  \r\n            background=\"#5F9EA0\"   \r\n            onPress={set} \r\n            fontSize={22}>\r\n            </ButtonClick>\r\n\r\n            <ButtonClick \r\n            title=\"24H\"  \r\n            background=\"#B0E0E6\" \r\n            onPress={pormatWatch} \r\n            fontSize={25}>\r\n            </ButtonClick>\r\n        </ButtonsRow>\r\n        )}\r\n\r\n        <ModalInput \r\n        modalOpen={modalOpen} \r\n        set={set} save={save} \r\n        modalFormat={modalFormat}\r\n        />\r\n\r\n      </View>\r\n   );\r\n\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: 'black',\r\n        alignItems: 'center',\r\n        paddingTop: 100,\r\n        paddingHorizontal:20,\r\n      },\r\n    \r\n});\r\n\r\nexport default AppWatch\r\n"]},"metadata":{},"sourceType":"module"}